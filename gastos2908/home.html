<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gastos</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center mb-4">Cuenta de Pagos</h1>
        
        <div class="row">
            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-header">
                        Agregar Pago
                    </div>
                    <div class="card-body">
                        <form id="paymentForm">
                            <div class="mb-3">
                                <input type="text" class="form-control" id="description" placeholder="Descripción" required>
                            </div>
                            <div class="mb-3">
                                <input type="number" class="form-control" id="amount" step="0.01" placeholder="Monto" required>
                            </div>
                            <div class="mb-3">
                                <input type="text" class="form-control" id="category" placeholder="Categoría" required>
                            </div>
                            <button type="submit" class="btn btn-primary">Agregar Pago</button>
                        </form>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-header">
                        Saldo Actual
                    </div>
                    <div class="card-body">
                        <h2 class="card-title" id="balance">0</h2>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        Transacciones
                        <div class="float-end">
                            <select id="sortCriteria" class="form-select form-select-sm d-inline-block w-auto">
                                <option value="dateDesc">Fecha (Más reciente primero)</option>
                                <option value="dateAsc">Fecha (Más antigua primero)</option>
                                <option value="amountDesc">Monto (Mayor a menor)</option>
                                <option value="amountAsc">Monto (Menor a mayor)</option>
                            </select>
                            <button onclick="sortTransactions()" class="btn btn-sm btn-secondary">Ordenar</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <ul id="transactions" class="list-group"></ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        Gráfico de Gastos
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="expensesChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        Tabla Dinámica
                        <div class="float-end">
                            <select id="aggregateCriteria" class="form-select form-select-sm d-inline-block w-auto">
                                <option value="category">Categoría</option>
                                <option value="month">Mes</option>
                            </select>
                            <button onclick="updateAggregateTable()" class="btn btn-sm btn-secondary">Actualizar Tabla</button>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table id="aggregateTable" class="table table-striped"></table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
